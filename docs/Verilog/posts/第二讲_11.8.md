## 第二讲_11.8

### 2位比较器，

一样输出1，不一样输出0，相当于同或。

```verilog
module  compare2 ( equal,a,b); 	
 		     output equal;
		     input [1:0] a,b; 			
		     assign equal = ( a = = b ) ? 1:0;
                / * 如果a等于b，则equal 为1，否则为0 * /	
		endmodule
```

1:0 a和b分别是2根线。

连等== 中间无空格

改装：

* 4 位比较器，1改为3,

* 同或门：去掉[1:0]

### 逻辑功能定义

* assign 

等号右边的式子算出来，用导线连接到等号左边，右边是表达式，左边是值（类比C++）。

* 用元件例化  

调用现有库函数，已经做好了的元器件。用现存的同或实现异或。

and myand3( f,a,b,c)；

类名 对象名（初始化参数：给对应端口接的线）

* “always” 块语句

  

```verilog
// 大概实现了一个计数的功能
always @(posedge clk/*敏感信号列表*/) // 每当时钟上升沿到来时执行一遍块内语句
	  begin
	       if(load)
	          out = data;      // 同步预置数据
	       else
	          out = data + 1 + cin;  // 加1计数
	  end

```

写在begin 和 end 之间的语句 都是有顺序的，要从上往下执行

always后面的敏感信号列表中有一个信号发生变化，begin和end之间的语句就执行一遍，一般用来做时序电路，也可以做时序逻辑

posedge 上升沿 找时钟的上升沿

always#10 每延迟10个时间单位，每个时间单位是一个时钟

* always语句和assign语句是并发的，没有先后顺序，

  assign是连线，always语句是触发，不要相互嵌套

### 三态驱动器

```verilog
module  trist1(out,in,enable);
      output  out;
      input   in, enable;
      mytri  tri_inst(out,in,enable);
endmodule

module mytri(out,in,enable);
     output  out;
     input   in, enable;
     assign out = enable? in:’bz;   //b为二进制，z为高阻状态
       / * 如果enable为1，则out = in，否则为高阻态 * /
endmodule

```

调用了自己写的子模块，main函数里调用自己写的函数

三个接口，2个输入，1个输出。

三态门是三角形，侧面的线是enable

enable为1时才把a传过去

高阻态：这条路断开了，不传0也不传1.

### Verilog关键字

buf 是 缓存

case语句就是C++中的switch语句，因为Verilog中switch是开关的意思

repeat table time wire 和硬件相关

命名时可以在前面加my前缀

### Verilog标识符

第一个字母可以是字母或下划线，不能是数字和$符号

中间不能用.

关键字不区分大小写：INPUT和OUTPUT ，自己设的变量名区分大小写

### Verilog数据类型

19种数据类型到最后就是0101.....

* interger 

仅限于用在循环变量

- parameter

是参数，概念很灵活，表达的是常数，但和常数不一样

写了一个位宽用parameter定义的加法器，parameter=8，别人调用了parameter = 16 ，参数和常量融合，可以在调用的时候被修改。

不能用变量datawidth来定义常量

define 可以只改一部分

\# 必须全部出现

* reg

寄存器，可以锁存一位信号，里面一直存着直到下次修改它，一个盒子，可以暂时放数

* wire

只是一根线，将信号传过去，不能存储

### 常量

全程都不会变

2 ‘b00 2位二进制数，值是00

Z高阻状态 短路

X待定状态 用在 case 语句里面 但仍是常量，但固定的是某些数值

负数只是前面加个负号

parameter：符号常量

#### 规范格式

只有0不用按照规范格式

位宽不一样无法比较

所有的位宽都指的是2进制位宽，例如 5’ d42，不合法，二进制位宽为5，最多能表达的数字是32

位宽省略，默认32位位宽

进制省略，默认10进制

不要用扩展，有多少位就写多少位

8’bzx = 8’bzzzz_zzzx 

四位放在一块用下划线间隔，编译的时候会自动去掉

### 变量

数组：从一个信号改成一排信号

定义了后面的这些变量，每个变量都是n位的位宽

reg必须在always语句里面被赋值

d 始终会存在这里面，

定义了一个寄存器数组，每个寄存器数组是一位的
